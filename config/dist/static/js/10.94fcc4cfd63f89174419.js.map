{"version":3,"sources":["webpack:///src/views/articles/List.vue","webpack:///./src/views/articles/List.vue?ed7c","webpack:///./src/views/articles/List.vue"],"names":["List","name","data","articles","total","pageSize","beforeRouteEnter","to","from","next","vm","setDataListByParams","params","user","watch","$route","this","computed","extends_default","Object","vuex_esm","currentPage","parseInt","query","page","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","returnUserData","returnArticleData","wrap","_context","prev","console","log","api","sent","uid","page_size","stop","changePage","$router","push","articles_List","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","_e","_l","article","src","avatar","_s","title","_f","date","onPageChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wNAqCAA,GACAC,KAAA,OACAC,KAFA,WAGA,OACAC,YACAC,MAAA,EACAC,SAAA,KAIAC,iBAVA,SAUAC,EAAAC,EAAAC,GACAA,EAAA,SAAAC,GAEAA,EAAAC,oBAAAJ,EAAAK,OAAAC,SAGAC,OACAC,OADA,SACAR,GAEAS,KAAAL,oBAAAJ,EAAAK,OAAAC,QAGAI,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EACA,OACA,UAGAE,YANA,WAOA,OAAAC,SAAAN,KAAAD,OAAAQ,MAAAC,OAAA,KAGAC,SACAd,oBADA,SACAE,GAAA,IAAAa,EAAAV,KAAA,OAAAW,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAL,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA1B,MAAA,cACA4B,QAAAC,IAAAZ,EAAAL,aADAc,EAAA1B,KAAA,EAEAU,OAAAoB,EAAA,EAAApB,CAAAN,GAFA,cAEAmB,EAFAG,EAAAK,KAGAH,QAAAC,IAAAN,GAHAG,EAAA1B,KAAA,EAIAU,OAAAoB,EAAA,EAAApB,EAAAsB,IAAAT,EAAA,QAAAR,KAAAE,EAAAL,YAAAqB,UAAAhB,EAAArB,WAJA,OAIA4B,EAJAE,EAAAK,KAMAd,EAAAvB,SAAA8B,EAAA,UACAP,EAAAtB,MAAA6B,EAAA,WAPA,yBAAAE,EAAAQ,SAAAZ,EAAAL,KAAAC,IAUAiB,WAXA,SAWApB,GAGAR,KAAA6B,QAAAC,MAAAvB,MAAAL,OAAAF,KAAAD,OAAAQ,OAAAC,cChFeuB,GADEC,OAFjB,WAA0B,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iCAA2CF,EAAA,OAAYE,YAAA,qCAA+CF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,MAAWE,YAAA,iBAA2BL,EAAAM,GAAA,4BAAAN,EAAA,KAAAG,EAAA,eAAkEE,YAAA,6BAAAE,OAAgDjD,GAAA,sBAAyB6C,EAAA,KAAUE,YAAA,sBAAgCL,EAAAM,GAAA,gCAAAN,EAAAQ,MAAA,GAAAR,EAAAM,GAAA,KAAAH,EAAA,MAA2EE,YAAA,cAAyBL,EAAAS,GAAAT,EAAA,kBAAAU,GAAyC,OAAAP,EAAA,MAAgBE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,sBAAAE,OAAyCI,IAAAD,EAAAE,UAAsBZ,EAAAM,GAAA,KAAAH,EAAA,eAAgCE,YAAA,QAAAE,OAA2BjD,GAAA,aAAAoD,EAAA,iBAAiDV,EAAAM,GAAA,iBAAAN,EAAAa,GAAAH,EAAAI,OAAA,kBAAAd,EAAAM,GAAA,KAAAH,EAAA,QAAyFE,YAAA,oBAA8BF,EAAA,QAAaE,YAAA,YAAsBL,EAAAM,GAAAN,EAAAa,GAAAb,EAAAe,GAAA,SAAAf,CAAAU,EAAAM,KAAA,oBAAgE,GAAAhB,EAAAM,GAAA,KAAAH,EAAA,OAA2BE,YAAA,mEAA6EF,EAAA,cAAmBI,OAAOnC,YAAA4B,EAAA5B,YAAAjB,MAAA6C,EAAA7C,MAAAC,SAAA4C,EAAA5C,SAAA6D,aAAAjB,EAAAL,eAAuG,UAEpvCuB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEtE,EACA+C,GATF,EAVA,SAAAwB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/10.94fcc4cfd63f89174419.js","sourcesContent":["<template>\n  <div class=\"col-md-9 left-col pull-right\">\n    <div class=\"panel article-body article-index\">\n      <div class=\"panel-body\">\n        <h1 class=\"all-articles\">\n          专栏文章\n          <router-link v-if=\"auth\" to=\"/articles/create\" class=\"btn btn-primary pull-right\">\n            <i class=\"fa fa-paint-brush\"></i>\n            创作文章\n          </router-link>\n        </h1>\n\n        <ul class=\"list-group\">\n          <!-- 使用 v-for 指令渲染文章列表 -->\n          <li v-for=\"article in articles\" class=\"list-group-item\">\n            <img :src=\"article.avatar\" class=\"avatar avatar-small\">\n            <router-link :to=\"`/articles/${article.id}/content`\" class=\"title\">\n              {{ article.title }}\n            </router-link>\n            <span class=\"meta pull-right\">\n              <span class=\"timeago\">{{ article.date | moment('from') }}</span>\n            </span>\n          </li>\n        </ul>\n         <!-- 分页组件 -->\n        <div class=\"panel-footer text-right remove-padding-horizontal pager-footer\">\n          <Pagination :currentPage=\"currentPage\" :total=\"total\" :pageSize=\"pageSize\" :onPageChange=\"changePage\" />\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { getUserByUserName,articles } from '@/api/api'\nexport default {\n  name: 'List',\n  data() {\n    return {\n      articles: [], // 对应用户文章\n      total: 0, // 文章总数\n      pageSize: 20, // 每页条数\n    }\n  },\n\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      // 确认渲染该组件的对应路由时，获取对应用户文章\n      vm.setDataListByParams(to.params.user)\n    })\n  },\n  watch: {\n    '$route'(to) {\n      // 在子页面之间相互切换时，通过 to.params 参数设置用户和文章数据\n      this.setDataListByParams(to.params.user)\n    }\n  },\n  computed: {\n    ...mapState([\n      'auth',\n      'user'\n    ]),\n    // 当前页，从查询参数 page 返回\n    currentPage() {\n      return parseInt(this.$route.query.page) || 1\n    }\n  },\n  methods:{\n    async setDataListByParams(user){\n      console.log(this.currentPage)\n      let returnUserData = await getUserByUserName(user)\n      console.log(returnUserData)\n      let returnArticleData = await articles({'uid':returnUserData['data']['id'],'page':this.currentPage,'page_size':this.pageSize})\n\n      this.articles = returnArticleData['data'][\"list\"]\n      this.total = returnArticleData['data']['total']\n    },\n    // 回调，组件的当前页改变时调用\n    changePage(page) {\n      // 在查询参数中混入 page，并跳转到该地址\n      // 混入部分等价于 Object.assign({}, this.$route.query, { page: page })\n      this.$router.push({ query: { ...this.$route.query, page } })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/articles/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-md-9 left-col pull-right\"},[_c('div',{staticClass:\"panel article-body article-index\"},[_c('div',{staticClass:\"panel-body\"},[_c('h1',{staticClass:\"all-articles\"},[_vm._v(\"\\n        专栏文章\\n        \"),(_vm.auth)?_c('router-link',{staticClass:\"btn btn-primary pull-right\",attrs:{\"to\":\"/articles/create\"}},[_c('i',{staticClass:\"fa fa-paint-brush\"}),_vm._v(\"\\n          创作文章\\n        \")]):_vm._e()],1),_vm._v(\" \"),_c('ul',{staticClass:\"list-group\"},_vm._l((_vm.articles),function(article){return _c('li',{staticClass:\"list-group-item\"},[_c('img',{staticClass:\"avatar avatar-small\",attrs:{\"src\":article.avatar}}),_vm._v(\" \"),_c('router-link',{staticClass:\"title\",attrs:{\"to\":(\"/articles/\" + (article.id) + \"/content\")}},[_vm._v(\"\\n            \"+_vm._s(article.title)+\"\\n          \")]),_vm._v(\" \"),_c('span',{staticClass:\"meta pull-right\"},[_c('span',{staticClass:\"timeago\"},[_vm._v(_vm._s(_vm._f(\"moment\")(article.date,'from')))])])],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"panel-footer text-right remove-padding-horizontal pager-footer\"},[_c('Pagination',{attrs:{\"currentPage\":_vm.currentPage,\"total\":_vm.total,\"pageSize\":_vm.pageSize,\"onPageChange\":_vm.changePage}})],1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23b57a92\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/articles/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23b57a92\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23b57a92\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23b57a92\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/articles/List.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}